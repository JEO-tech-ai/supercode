import{createComponent as m,isServer as C,getRequestEvent as O,delegateEvents as j,ssr as x,ssrHydrationKey as I}from"solid-js/web";import{F as q}from"./server-fns-Dk_jt6UL.js";import{children as B,createMemo as S,getOwner as D,untrack as K,Show as U,on as N,createRoot as W,createSignal as _,onCleanup as T,sharedConfig as L,Suspense as H}from"solid-js";import{d as M,e as V,R as J,g as $,f as z,h as k,i as G,m as Q,j as X,k as Y,s as Z,l as tt,T as et}from"./routing-CyxMTkit.js";import"solid-js/web/storage";import"h3";import"node:async_hooks";const F=t=>r=>{const{base:a}=r,n=B(()=>r.children),e=S(()=>M(n(),r.base||""));let i;const u=V(t,e,()=>i,{base:a,singleFlight:r.singleFlight,transformUrl:r.transformUrl});return t.create&&t.create(u),m(J.Provider,{value:u,get children(){return m(rt,{routerState:u,get root(){return r.root},get preload(){return r.rootPreload||r.rootLoad},get children(){return[(i=D())&&null,m(nt,{routerState:u,get branches(){return e()}})]}})}})};function rt(t){const r=t.routerState.location,a=t.routerState.params,n=S(()=>t.preload&&K(()=>{t.preload({params:a,location:r,intent:$()||"initial"})}));return m(U,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:e=>m(e,{params:a,location:r,get data(){return n()},get children(){return t.children}})})}function nt(t){if(C){const e=O();if(e&&e.router&&e.router.dataOnly){at(e,t.routerState,t.branches);return}e&&((e.router||(e.router={})).matches||(e.router.matches=t.routerState.matches().map(({route:i,path:u,params:f})=>({path:i.originalPath,pattern:i.pattern,match:u,params:f,info:i.info}))))}const r=[];let a;const n=S(N(t.routerState.matches,(e,i,u)=>{let f=i&&e.length===i.length;const h=[];for(let l=0,w=e.length;l<w;l++){const b=i&&i[l],g=e[l];u&&b&&g.route.key===b.route.key?h[l]=u[l]:(f=!1,r[l]&&r[l](),W(y=>{r[l]=y,h[l]=z(t.routerState,h[l-1]||t.routerState.base,P(()=>n()[l+1]),()=>{const p=t.routerState.matches();return p[l]??p[0]})}))}return r.splice(e.length).forEach(l=>l()),u&&f?u:(a=h[0],h)}));return P(()=>n()&&a)()}const P=t=>()=>m(U,{get when(){return t()},keyed:!0,children:r=>m(G.Provider,{value:r,get children(){return r.outlet()}})});function at(t,r,a){const n=new URL(t.request.url),e=k(a,new URL(t.router.previousUrl||t.request.url).pathname),i=k(a,n.pathname);for(let u=0;u<i.length;u++){(!e[u]||i[u].route!==e[u].route)&&(t.router.dataOnly=!0);const{route:f,params:h}=i[u];f.preload&&f.preload({params:h,location:r.location,intent:"preload"})}}function ot([t,r],a,n){return[t,n?e=>r(n(e)):r]}function st(t){let r=!1;const a=e=>typeof e=="string"?{value:e}:e,n=ot(_(a(t.get()),{equals:(e,i)=>e.value===i.value&&e.state===i.state}),void 0,e=>(!r&&t.set(e),L.registry&&!L.done&&(L.done=!0),e));return t.init&&T(t.init((e=t.get())=>{r=!0,n[1](a(e)),r=!1})),F({signal:n,create:t.create,utils:t.utils})}function it(t,r,a){return t.addEventListener(r,a),()=>t.removeEventListener(r,a)}function ut(t,r){const a=t&&document.getElementById(t);a?a.scrollIntoView():r&&window.scrollTo(0,0)}function ct(t){const r=new URL(t);return r.pathname+r.search}function lt(t){let r;const a={value:t.url||(r=O())&&ct(r.request.url)||""};return F({signal:[()=>a,n=>Object.assign(a,n)]})(t)}const dt=new Map;function ht(t=!0,r=!1,a="/_server",n){return e=>{const i=e.base.path(),u=e.navigatorFactory(e.base);let f,h;function l(o){return o.namespaceURI==="http://www.w3.org/2000/svg"}function w(o){if(o.defaultPrevented||o.button!==0||o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)return;const s=o.composedPath().find(A=>A instanceof Node&&A.nodeName.toUpperCase()==="A");if(!s||r&&!s.hasAttribute("link"))return;const d=l(s),c=d?s.href.baseVal:s.href;if((d?s.target.baseVal:s.target)||!c&&!s.hasAttribute("state"))return;const v=(s.getAttribute("rel")||"").split(/\s+/);if(s.hasAttribute("download")||v&&v.includes("external"))return;const R=d?new URL(c,document.baseURI):new URL(c);if(!(R.origin!==window.location.origin||i&&R.pathname&&!R.pathname.toLowerCase().startsWith(i.toLowerCase())))return[s,R]}function b(o){const s=w(o);if(!s)return;const[d,c]=s,E=e.parsePath(c.pathname+c.search+c.hash),v=d.getAttribute("state");o.preventDefault(),u(E,{resolve:!1,replace:d.hasAttribute("replace"),scroll:!d.hasAttribute("noscroll"),state:v?JSON.parse(v):void 0})}function g(o){const s=w(o);if(!s)return;const[d,c]=s;n&&(c.pathname=n(c.pathname)),e.preloadRoute(c,d.getAttribute("preload")!=="false")}function y(o){clearTimeout(f);const s=w(o);if(!s)return h=null;const[d,c]=s;h!==d&&(n&&(c.pathname=n(c.pathname)),f=setTimeout(()=>{e.preloadRoute(c,d.getAttribute("preload")!=="false"),h=d},20))}function p(o){if(o.defaultPrevented)return;let s=o.submitter&&o.submitter.hasAttribute("formaction")?o.submitter.getAttribute("formaction"):o.target.getAttribute("action");if(!s)return;if(!s.startsWith("https://action/")){const c=new URL(s,Q);if(s=e.parsePath(c.pathname+c.search),!s.startsWith(a))return}if(o.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const d=dt.get(s);if(d){o.preventDefault();const c=new FormData(o.target,o.submitter);d.call({r:e,f:o.target},o.target.enctype==="multipart/form-data"?c:new URLSearchParams(c))}}j(["click","submit"]),document.addEventListener("click",b),t&&(document.addEventListener("mousemove",y,{passive:!0}),document.addEventListener("focusin",g,{passive:!0}),document.addEventListener("touchstart",g,{passive:!0})),document.addEventListener("submit",p),T(()=>{document.removeEventListener("click",b),t&&(document.removeEventListener("mousemove",y),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",p)})}}function mt(t){if(C)return lt(t);const r=()=>{const n=window.location.pathname.replace(/^\/+/,"/")+window.location.search,e=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:n+window.location.hash,state:e}},a=X();return st({get:r,set({value:n,replace:e,scroll:i,state:u}){e?window.history.replaceState(Y(u),"",n):window.history.pushState(u,"",n),ut(decodeURIComponent(window.location.hash.slice(1)),i),Z()},init:n=>it(window,"popstate",tt(n,e=>{if(e)return!a.confirm(e);{const i=r();return!a.confirm(i.value,{state:i.state})}})),create:ht(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:n=>window.history.go(n),beforeLeave:a}})(t)}var ft=["<div",' class="flex items-center justify-center h-screen">Loading...</div>'];function Lt(){return m(et,{defaultTheme:"system",get children(){return m(mt,{root:t=>m(H,{get fallback(){return x(ft,I())},get children(){return t.children}}),get children(){return m(q,{})}})}})}export{Lt as default};
